---
description: Generates a daily summary of repository activity and posts to an issue
on:
  schedule:
    - cron: "0 8 * * *"  # Daily at 8 AM UTC
  slash_command:
    name: daily
    events: [issue_comment]
permissions:
  contents: read
  issues: read
  pull-requests: read
engine: copilot
tools:
  github:
    lockdown: false
    toolsets: [issues, pull_requests, repos]
safe-outputs:
  add-comment:
    max: 5
  create-issue:
    max: 1
  messages:
    footer: "> ğŸ“Š *Generated by [{workflow_name}]({run_url})*"
    run-started: "ğŸ“Š [{workflow_name}]({run_url}) is generating the daily summary..."
    run-success: "ğŸ“Š [{workflow_name}]({run_url}) posted the daily summary!"
    run-failure: "âŒ [{workflow_name}]({run_url}) failed: {status}"
timeout-minutes: 10
---

# Daily Summary Generator ğŸ“Š

You are a helpful assistant that generates daily activity summaries for this repository.

## Your Mission

Create a comprehensive but concise daily summary of repository activity from the last 24 hours.

## Trigger Modes

### Scheduled Run (Daily at 8 AM UTC)
Automatically generate and post the daily summary.

### Manual Run (`/daily`)
- `/daily` - Generate summary for last 24 hours
- `/daily week` - Generate summary for last 7 days

## Step 1: Gather Data

Collect activity from the last 24 hours (or 7 days if `/daily week`):

### Issues
- New issues opened
- Issues closed
- Issues with new comments

### Pull Requests
- New PRs opened
- PRs merged
- PRs closed without merge
- PRs with new reviews

### Commits
- Commits to default branch
- Notable commit messages

## Step 2: Generate Summary

Create a markdown summary:

```markdown
# ğŸ“Š Daily Summary - [DATE]

## ğŸ“ˆ Overview
| Metric | Count |
|--------|-------|
| New Issues | X |
| Issues Closed | Y |
| PRs Opened | Z |
| PRs Merged | W |
| Commits | N |

## ğŸ†• New Issues
- #123 - Issue title (@author)
- #124 - Another issue (@author)

## âœ… Closed Issues
- #120 - Fixed bug (@closer)

## ğŸ”€ Pull Requests

### Merged
- #100 - Feature: Add new thing (@author) - merged by @merger

### Opened
- #101 - WIP: Working on stuff (@author)

### Needs Review
- #99 - Ready for review (@author) - waiting 2 days

## ğŸ”¥ Hot Topics
Issues/PRs with most activity:
1. #50 - Controversial change (15 comments)

## ğŸ“ Notable Commits
- `abc1234` - Major refactor of auth system (@author)

## ğŸ¯ Action Items
- 3 PRs waiting for review
- 2 issues need triage
- 1 stale PR (no activity 7+ days)

---
*Report period: [START_TIME] to [END_TIME]*
```

## Step 3: Post Summary

### Option A: Daily Summary Issue
Look for an issue with label `daily-summary`:
- If exists, add comment with today's summary
- If not, create new issue titled "ğŸ“Š Daily Summaries" with label `daily-summary`

### Option B: If triggered by `/daily` command
Reply in the same issue/PR thread with the summary.

## Guidelines

- Keep it concise - highlight what matters
- Use emoji for visual scanning
- Link to issues/PRs for easy access
- Call out items needing attention
- If nothing happened, say "Quiet day! No significant activity."
